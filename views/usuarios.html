<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Mantenimiento</title>

    <link rel="stylesheet" type="text/css" href="../css/style_page.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cal+Sans&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

</head>

<body>
    <div class="body-principal container-fluid ">
        <div class="row">
            <div class=" col-12 col-sm-12 col-md-12 col-lg-2 px-0">
                <div
                    class="color-primary rounded-md-start rounded-lg-start rounded-md-4 rounded-lg-4 d-lg-block d-md-block h-md-100 h-lg-100 d-sm-block navbar navbar-expand-lg content-page-100">

                    <div class="row">
                        <div class="col-10">
                            <div class="ps-lg-4 ps-2 py-lg-4 py-1">
                                <h3 class="fw-bold"> Gestión de Mantenimiento</h3>
                            </div>
                        </div>

                        <div class="col-2 d-flex align-items-center ">
                            <div class="justify-content-end">
                                <button class="navbar-toggler border-0 text-end" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup"
                                    aria-expanded="false" aria-label="Toggle navigation">
                                    <i class="bi bi-menu-button-wide-fill "></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                        <div class="d-flex justify-content-start align-items-start">
                            <div class="nav flex-lg-column flex-sm-col nav-pills " id="v-pills-tab" role="tablist"
                                aria-orientation="vertical">

                                <div class="align-items-center">
                                    <p class="ps-2 text-secondary text-small">MENÚ PRINCIPAL</p>
                                </div>

                                <a class="text-dark nav-link rounded-diam rounded-2" id="v-pills-home-tab"
                                href="../Index.html" type="button" role="tab"
                                    aria-controls="v-pills-home" aria-selected="false">
                                    <div class="text-span ps-2">
                                        <i class="bi bi-house-fill bi-sm mx-2"></i>
                                        <span class="text-icon ps-1">Inicio</span>
                                    </div>
                                </a>

                                <a  class="text-dark nav-link rounded-diam " id="v-pills-status-tab"
                                href="../views/Gestion_mantenimiento.html" type="button"
                                    aria-controls="v-pills-status" role="tab" aria-selected="false">
                                    <div class="text-span  ps-2">
                                        <i class="bi bi-archive bi-sm mx-2"></i>
                                        <span class="text-icon ps-1"> Gestión de equipos</span>
                                    </div>
                                </a>

                                <button class="text-dark nav-link rounded-diam d-none" id="v-pills-status-details-tab"
                                    data-bs-toggle="pill" data-bs-target="#v-pills-status-details" type="button"
                                    aria-controls="v-pills-status-details" role="tab" aria-selected="false">
                                    <div class="text-span ps-2">
                                        <i class="bi bi-archive bi-sm mx-2"></i>
                                        <span class="text-icon ps-1"> Mantenimientos </span>
                                    </div>
                                </button>

                                <div class="align-items-center">
                                    <p class="ps-2 text-secondary text-small">CONFIGURACIÓN</p>
                                </div>

                                <button class="text-dark nav-link rounded-diam active" id="v-pills-users-tab" data-bs-toggle="pill" data-bs-target="#v-pills-users" type="button"
                                    aria-controls="v-pills-users" aria-selected="true"> <div class="text-span ps-2">
                                        <i class="bi bi-people bi-sm mx-2"></i>
                                        <span class="text-icon ps-1"> Usuarios </span>
                                    </div>
                                </button>

                                <button class="text-dark nav-link rounded-diam " id="v-pills-config-tab" data-bs-toggle="pill"
                                    data-bs-target="#v-pills-config" type="button" aria-controls="v-pills-config" aria-selected="false">
                                    <div class="text-span ps-2">
                                        <i class="bi bi-gear bi-sm mx-2"></i>
                                        <span class="text-icon ps-1"> Configuración</span>
                                    </div>
                                </button>

                                <button class="text-dark nav-link rounded-diam " id="v-pills-logout-tab" data-bs-toggle="pill"
                                    type="button" aria-controls="" aria-selected="false">
                                    <div class="text-span ps-2">
                                        <i class="bi bi-box-arrow-in-right bi-sm mx-2"></i>
                                        <span class="text-icon ps-1"> Salir</span>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-10 ">
                <div class="tab-content" id="v-pills-tabContent">

                    <div class="tab-pane fade" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
                    </div>

                    <div class="tab-pane fade" id="v-pills-status" role="tabpanel" aria-labelledby="v-pills-status-tab">
                        <div class="row color-fondo content-page-100 content">
                            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb" class="mb-2">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item text-small breadcrumb_home"><a>Inicio</a></li>
                                    <li class="breadcrumb-item text-small text-dark text-capitalize" id="nam_status"
                                        aria-current="page">Gestión de equipos</li>
                                </ol>
                                <div> <button class="btn btn-warning text-small rounded-4"> <i
                                                class="bi bi-robot bi-sm"></i>Registrar Nuevo equipo</button> </div>
                            </nav>

                            <div id="content_gestion_equipo"
                                class=" h-100 d-flex justify-content-start align-items-start row row-cols-1 row-cols-sm-1 row-cols-md-3 row-cols-lg-3 row-cols-xl-4">

                            </div>

                        </div>
                    </div>

                    <div class="tab-pane fade" id="v-pills-status-details" role="tabpanel"
                        aria-labelledby="v-pills-status-details-tab">
                        <div class="pageStatusDetailsContent"></div>
                    </div>

                    <div class="tab-pane fade show active" id="v-pills-users" role="tabpanel" aria-labelledby="v-pills-users-tab"> <div class="row color-fondo content-page-100 content">
                            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb" class="mb-2">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item text-small breadcrumb_home_users"><a>Inicio</a></li>
                                    <li class="breadcrumb-item text-small text-dark text-capitalize" id="nam_users"
                                        aria-current="page">Gestión de Usuarios</li>
                                </ol>
                                <div> <button class="btn btn-success text-small rounded-4"> <i
                                                class="bi bi-person-plus-fill bi-sm"></i> Registrar Nuevo Usuario</button> </div>
                            </nav>

                            <div class="container-fluid">
                                <h4 class="mt-4 mb-3">Usuarios por Estado</h4>
                                <div class="row" id="user-status-sections">
                                    <div class="col-12 mb-3">
                                        <h5 class="text-primary">Usuarios Activos</h5>
                                        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4" id="active-users-content">
                                            </div>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <h5 class="text-secondary">Usuarios Inactivos</h5>
                                        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4" id="inactive-users-content">
                                            </div>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <h5 class="text-info">Usuarios de Vacaciones</h5>
                                        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4" id="vacation-users-content">
                                            </div>
                                    </div>
                                </div>

                                <h4 class="mt-4 mb-3">Resumen de Usuarios</h4>
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Estado</th>
                                                <th>Cantidad</th>
                                            </tr>
                                        </thead>
                                        <tbody id="user-summary-table-body">
                                            </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="v-pills-config" role="tabpanel" aria-labelledby="v-pills-config-tab">
                        <div class="row color-fondo content-page-100 content">
                            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb" class="mb-2">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item text-small breadcrumb_home_config"><a>Inicio</a></li>
                                    <li class="breadcrumb-item text-small text-dark text-capitalize" id="nam_config"
                                        aria-current="page">Configuración</li>
                                </ol>
                            </nav>
                            <div class="container-fluid">
                                <h3>Configuración de la Aplicación</h3>
                                <p>Contenido para la configuración de la aplicación.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
      

        // Sample user data
        let data_users = [
            { "name": "Juan Pérez", "email": "juan.perez@example.com", "status": "activo", "image": "https://cdn-icons-png.flaticon.com/128/2210/2210178.png" },
            { "name": "Maria García", "email": "maria.garcia@example.com", "status": "activo", "image": "https://cdn-icons-png.flaticon.com/128/2210/2210178.png" },
            { "name": "Carlos Ruíz", "email": "carlos.ruiz@example.com", "status": "activo", "image": "https://cdn-icons-png.flaticon.com/128/2210/2210178.png" },
            { "name": "Ana López", "email": "ana.lopez@example.com", "status": "inactivo", "image": "https://cdn-icons-png.flaticon.com/128/2210/2210178.png" },
            { "name": "Pedro Martínez", "email": "pedro.martinez@example.com", "status": "vacaciones", "image": "https://cdn-icons-png.flaticon.com/128/2210/2210178.png" },
            { "name": "Laura Fernández", "email": "laura.fernandez@example.com", "status": "activo", "image": "https://cdn-icons-png.flaticon.com/128/2210/2210178.png" },
            { "name": "Diego Sánchez", "email": "diego.sanchez@example.com", "status": "activo", "image": "https://cdn-icons-png.flaticon.com/128/2210/2210178.png" },
            { "name": "Sofía Díaz", "email": "sofia.diaz@example.com", "status": "inactivo", "image": "https://cdn-icons-png.flaticon.com/128/2210/2210178.png" },
            { "name": "Andrés Gómez", "email": "andres.gomez@example.com", "status": "vacaciones", "image": "https://cdn-icons-png.flaticon.com/128/2210/2210178.png" },
            { "name": "Isabel Torres", "email": "isabel.torres@example.com", "status": "activo", "image": "https://cdn-icons-png.flaticon.com/128/2210/2210178.png" }
        ];


        function llenarGestionManteni() {
            const contentGestionEquipo = document.getElementById('content_gestion_equipo');
            contentGestionEquipo.innerHTML = ''; // Limpiar el contenido existente

            data_equipos.forEach(equipo => {
                const [fecha, nombreEquipo, serie, modelo, imagen, cardClass] = equipo;

                const cardHtml = `
                    <div class="col my-2">
                        <div class="card ${cardClass} card-equipment rounded-4 text-dark" style="width: 18rem;"
                            data-bs-toggle="pill" data-bs-target="#v-pills-status-details" type="button"
                            role="tab" aria-controls="v-pills-status-details" aria-selected="false">
                            <div class="card-body">
                                <div class="row align-items-center">
                                    <div class="col-4">
                                        <img src="${imagen}" class="img-fluid" alt="Icono de equipo">
                                    </div>
                                    <div class="col-8">
                                        <h5 class="card-title fw-bold">${nombreEquipo}</h5>
                                        <p class="card-text text-small mb-0">Serie: ${serie}</p>
                                        <p class="card-text text-small">Modelo: ${modelo}</p>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-12">
                                        <p class="card-text text-small text-muted">Último mantenimiento: ${fecha}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                contentGestionEquipo.innerHTML += cardHtml;
            });

            // Añadir el event listener a cada tarjeta para cambiar de pestaña
            contentGestionEquipo.querySelectorAll('.card-equipment').forEach(card => {
                card.addEventListener('click', () => {
                    const statusTab = document.getElementById('v-pills-status-tab');
                    const statusDetailsTab = document.getElementById('v-pills-status-details-tab');

                    // Ocultar la pestaña activa actual
                    statusTab.classList.remove('active');
                    document.getElementById('v-pills-status').classList.remove('show', 'active');
                    statusTab.classList.add('d-none'); // Hide the main status tab button

                    // Mostrar la pestaña de detalles
                    statusDetailsTab.classList.add('active');
                    statusDetailsTab.classList.remove('d-none'); // Show the details tab button
                    document.getElementById('v-pills-status-details').classList.add('show', 'active');
                });
            });

            // Añadir event listener al breadcrumb "Inicio" para volver a la lista de equipos
            document.querySelector('.breadcrumb_home').addEventListener('click', () => {
                const statusTab = document.getElementById('v-pills-status-tab');
                const statusDetailsTab = document.getElementById('v-pills-status-details-tab');

                // Ocultar la pestaña de detalles
                statusDetailsTab.classList.remove('active');
                statusDetailsTab.classList.add('d-none'); // Hide the details tab button
                document.getElementById('v-pills-status-details').classList.remove('show', 'active');

                // Mostrar la pestaña de lista de equipos
                statusTab.classList.add('active');
                statusTab.classList.remove('d-none'); // Show the main status tab button
                document.getElementById('v-pills-status').classList.add('show', 'active');
            });
        }


        function llenarGestionUsuarios() {
            const activeUsersContent = document.getElementById('active-users-content');
            const inactiveUsersContent = document.getElementById('inactive-users-content');
            const vacationUsersContent = document.getElementById('vacation-users-content');
            const userSummaryTableBody = document.getElementById('user-summary-table-body');

            activeUsersContent.innerHTML = '';
            inactiveUsersContent.innerHTML = '';
            vacationUsersContent.innerHTML = '';
            userSummaryTableBody.innerHTML = '';

            let activeCount = 0;
            let inactiveCount = 0;
            let vacationCount = 0;

            data_users.forEach(user => {
                const userCardHtml = `
                    <div class="col my-2">
                        <div class="card h-100 rounded-4 text-dark user-card">
                            <div class="card-body d-flex flex-column align-items-center justify-content-center">
                                <img src="${user.image}" class="img-fluid rounded-circle mb-2" style="width: 80px; height: 80px; object-fit: cover;" alt="User Icon">
                                <h5 class="card-title fw-bold text-center">${user.name}</h5>
                                <p class="card-text text-small mb-1 text-center">${user.email}</p>
                                <span class="badge ${getStatusBadgeClass(user.status)}">${user.status.charAt(0).toUpperCase() + user.status.slice(1)}</span>
                            </div>
                        </div>
                    </div>
                `;

                if (user.status === "activo") {
                    activeUsersContent.innerHTML += userCardHtml;
                    activeCount++;
                } else if (user.status === "inactivo") {
                    inactiveUsersContent.innerHTML += userCardHtml;
                    inactiveCount++;
                } else if (user.status === "vacaciones") {
                    vacationUsersContent.innerHTML += userCardHtml;
                    vacationCount++;
                }
            });

            // Populate the summary table
            const summaryData = [
                { status: "Activos", count: activeCount },
                { status: "Inactivos", count: inactiveCount },
                { status: "Vacaciones", count: vacationCount },
                { status: "Total", count: activeCount + inactiveCount + vacationCount }
            ];

            summaryData.forEach(item => {
                const rowHtml = `
                    <tr>
                        <td>${item.status}</td>
                        <td>${item.count}</td>
                    </tr>
                `;
                userSummaryTableBody.innerHTML += rowHtml;
            });
        }

        function getStatusBadgeClass(status) {
            switch (status) {
                case "activo":
                    return "bg-success";
                case "inactivo":
                    return "bg-danger";
                case "vacaciones":
                    return "bg-info";
                default:
                    return "bg-secondary";
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Llama a llenarGestionUsuarios cuando el DOM esté completamente cargado
            llenarGestionUsuarios();

            // Event listener para el botón de la pestaña "Usuarios" (para recargar si se hace clic después)
            document.getElementById('v-pills-users-tab').addEventListener('click', () => {
                llenarGestionUsuarios(); // Vuelve a renderizar los datos de usuario cuando se hace clic en la pestaña
            });

          

            // Event listener para el breadcrumb "Inicio" en la pestaña de Usuarios
            document.querySelector('.breadcrumb_home_users').addEventListener('click', () => {
                // Desactiva la pestaña de usuarios actual y activa la pestaña de inicio
                document.getElementById('v-pills-users-tab').classList.remove('active');
                document.getElementById('v-pills-users').classList.remove('show', 'active');

                document.getElementById('v-pills-home-tab').classList.add('active');
                document.getElementById('v-pills-home').classList.add('show', 'active');
            });

            // Event listener para el breadcrumb "Inicio" en la pestaña de Configuración
            document.querySelector('.breadcrumb_home_config').addEventListener('click', () => {
                // Desactiva la pestaña de configuración actual y activa la pestaña de inicio
                document.getElementById('v-pills-config-tab').classList.remove('active');
                document.getElementById('v-pills-config').classList.remove('show', 'active');

                document.getElementById('v-pills-home-tab').classList.add('active');
                document.getElementById('v-pills-home').classList.add('show', 'active');
            });
            // Opcional: Si quieres que el "Inicio" del breadcrumb de equipos también redirija al home
            document.querySelector('.breadcrumb_home').addEventListener('click', () => {
                document.getElementById('v-pills-status-tab').classList.remove('active');
                document.getElementById('v-pills-status').classList.remove('show', 'active');

                document.getElementById('v-pills-home-tab').classList.add('active');
                document.getElementById('v-pills-home').classList.add('show', 'active');
            });
        });
    </script>
</body>

</html>